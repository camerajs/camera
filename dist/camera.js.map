{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/camera.ts","src/events/load.ts","src/lib/browser.ts","src/lib/utils.ts","src/preferences.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,qBAAwC;AACxC,4BAA0C;AAC1C,sBAAkC;AAClC,wBAAsC;AAEtC;AACI;AACI,AAAiB,0BAAC,AAAK,AAAE,AAAC,AAC9B;AAAC;AAEY,sBAAK,QAAlB;;gBACQ,AAAkB;;;;6CAAG,IAAI,OAAS,AAAE;AACxC,AAAiG;AAEjG,6CAAM,AAAkB,mBAAC,AAAa,AAAE;;AAFxC,AAAiG;AAEjG,2BAAwC,AAAC;AAEzC,AAAE,AAAC,4BAAC,CAAC,UAAO,QAAC,AAAmB,AAAE,AAAC,uBAAC,AAAC;AACjC,oCAAK,MAAC,AAAG,IAAC,AAAsC,wCAAE,AAAM,AAAC,AAAC,AAC9D;AAAC;AAED,AAAE,AAAC,4BAAC,CAAC,cAAW,YAAC,AAAO,AAAC,SAAC,AAAC;AACvB,oCAAK,MAAC,AAAG,IAAC,AAAgB,kBAAE,AAAM,AAAC,AAAC,AACxC;AAAC;;;;;AACJ;AACL,WAAA,AAAC;AAnBD,AAmBC;AAED,IAAI,AAAiB,AAAE,AAAC;;;;;ACzBxB,sBAAmC;AACnC,wBAAuC;AACvC,4BAA2C;AAE3C;AAAA,yBAwBA,CAAC;AAtBG,wBAAa,gBAAb;AAAA,oBAeC;AAdG,AAGG;;;;AACH,AAAM,mBAAK,AAAO,QAAO,UAAA,AAAO;AAC5B,AAAM,mBAAC,AAAgB,iBAAC,AAAM,QAAE;AAC5B,AAGG;;;;AACH,AAAI,sBAAC,AAAa,AAAE,AAAC;AACrB,AAAO,AAAE,AAAC,AACd;AAAC,AAAC,AAAC,AACP;AAAC,AAAC,AAAC,AACP,SAVW;AAUV;AAED,wBAAa,gBAAb;AACI,sBAAW,YAAC,AAAO,UAAG,QAAK,MAAC,AAAO,AAAE,AAAC;AACtC,sBAAW,YAAC,AAAQ,WAAG,UAAO,QAAC,AAAW,AAAE,AAAC,eAAC,AAAqD,AACvG;AAAC;AAEL,WAAA,AAAC;AAxBD,AAwBC;AAxBY,oBAAS;;;;;ACLtB,4BAA2C;AAC3C;AAAA,uBAqBA,CAAC;AApBU,YAAmB,sBAA1B;AACI,AAAkF;AAClF,AAAE,AAAC,YAAC,AAAS,UAAC,AAAY,gBAAI,AAAS,UAAC,AAAY,aAAC,AAAY,gBAC7D,AAAS,UAAC,AAAc,eAAC,AAAoB,AAAC,yBAC9C,AAAS,UAAC,AAAc,eAAC,AAAiB,AAAC,AAAC,oBAAC,AAAC;AAC9C,0BAAW,YAAC,AAAoB,uBAAG,AAAI,AAAC;AACxC,AAAM,mBAAC,AAAI,AAAC,AAChB;AAAC;AACD,AAAM,eAAC,AAAK,AAAC,AACjB;AAAC;AAEM,YAAW,cAAlB;AACI,AAAsD;AACtD,YAAI,AAAK,QAAG,AAAK,AAAC;AAClB,SAAC,UAAU,AAAC;AACR,AAAE,AAAC,gBAAC,AAA0T,2TAAC,AAAI,KAAC,AAAC,AAAC,MAAI,AAAykD,0kDAAC,AAAI,KAAC,AAAC,EAAC,AAAM,OAAC,AAAC,GAAE,AAAC,AAAC,AAAC,AAAC,KAAC,AAAK,QAAG,AAAI,AAAC,AAC37D;AAAC,AAAC,WAAC,AAAS,UAAC,AAAS,aAAI,AAAS,UAAC,AAAM,AAAC,AAAC;AAC5C,AAAM,eAAC,AAAK,AAAC,AACjB;AAAC;AAEL,WAAA,AAAC;AArBD,AAqBC;AArBY,kBAAO;;;;;ACDpB,4BAA2C;AAE3C;AAAA,qBAiCA,CAAC;AAhCU,UAAG,MAAV,UAAW,AAAe,SAAE,AAAa;AACrC,AAAO,kBAAG,AAAa,gBAAE,AAAO,AAAC;AACjC,AAAE,AAAC,YAAC,cAAW,YAAC,AAAK,AAAC,OAAC,AAAC;AACpB,AAAM,AAAC,oBAAC,AAAI,AAAC,AAAC,AAAC;AACX,qBAAK,AAAM;AACP,AAAO,4BAAC,AAAI,KAAC,AAAO,AAAC,AAAC;AACtB,AAAK,AAAC;AACV,qBAAK,AAAK;AACN,AAAO,4BAAC,AAAG,IAAC,AAAO,AAAC,AAAC;AACrB,AAAK,AAAC;AACV,qBAAK,AAAO;AACR,AAAO,4BAAC,AAAK,MAAC,AAAO,AAAC,AAAC;AACvB,AAAK,AAAC;AACV;AACI,AAAO,4BAAC,AAAG,IAAC,AAAO,AAAC,AAAC,AAC7B,AAAC,AACL;;AAAC,AACL;AAAC;AAEM,UAAO,UAAd;AACI,AAAM,eAAC,AAAQ,YAAI,AAAQ,SAAC,AAAQ,SAAC,AAAQ,AAAC,AAClD;AAAC;AAED,AAIG;;;;;AACI,UAAQ,WAAf,UAAgB,AAAU;AACtB,YAAI,AAAM,SAAW,AAA8E,AAAC;AACpG,AAAM,eAAC,AAAM,OAAC,AAAI,KAAC,AAAG,AAAC,AAAC,AAC5B;AAAC;AACL,WAAA,AAAC;AAjCD,AAiCC;AAjCY,gBAAK;;;;;ACFlB;AAAA,2BAKA,CAAC;AAAD,WAAA,AAAC;AALD,AAKC;AAJU,YAAO,UAAW,AAAK,AAAC;AACxB,YAAQ,WAAW,AAAK,AAAC;AACzB,YAAK,QAAW,AAAI,AAAC;AACrB,YAAoB,uBAAW,AAAK,AAAC;AAJnC,sBAAW","file":"camera.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import {loadEvent} from \"./events/load\";\r\nimport {preferences} from \"./preferences\";\r\nimport {utils} from \"./lib/utils\";\r\nimport {browser} from \"./lib/browser\";\r\nimport {upload} from \"./lib/upload\";\r\nclass cameraInitializer {\r\n    constructor() {\r\n        cameraInitializer.ready();\r\n    }\r\n\r\n    static async ready() {\r\n        let loadEventInstancew = new loadEvent();\r\n        //https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#downlevel-async-functions\r\n\r\n        await loadEventInstancew.eventListener();\r\n\r\n        if (!browser.checkBrowserSupport()) {\r\n            utils.log(\"Your browser does not support camera\", \"warn\");\r\n        }\r\n\r\n        if (!preferences.isHttps) {\r\n            utils.log(\"HTTPS required\", \"warn\");\r\n        }\r\n    }\r\n}\r\n\r\nnew cameraInitializer();\r\n","import {eventInterface} from \"./interface\";\r\nimport {utils} from \"../lib/utils\";\r\nimport {browser} from \"../lib/browser\";\r\nimport {preferences} from \"../preferences\";\r\n\r\nexport class loadEvent implements eventInterface {\r\n\r\n    eventListener() {\r\n        /**\r\n         * This method will be called inside the this.eventCallback method using a async function which means\r\n         *   the method (this.eventCallback) will wait for the answer from evenListener (current method).\r\n         */\r\n        return new Promise<void>(resolve => {\r\n            window.addEventListener(\"load\", () => {\r\n                /**\r\n                 * resolve() will return to result to the async function in its call stack, and will let the function\r\n                 *   continue\r\n                 */\r\n                this.eventCallback();\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    eventCallback() {\r\n        preferences.isHttps = utils.isHttps();\r\n        preferences.isMobile = browser.checkMobile(); //If true, means the user browser is a mobile browser\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import {preferences} from \"../preferences\";\r\nexport class browser {\r\n    static checkBrowserSupport():boolean {\r\n        //This method will check if the user browser is supporting HTML5 camera API or not\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia ||\r\n            navigator.hasOwnProperty(\"webkitGetUserMedia\") ||\r\n            navigator.hasOwnProperty(\"mozGetUserMedia\")) {\r\n            preferences.browserCameraSupport = true;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static checkMobile ():boolean{\r\n        //Return true if the user browser is a mobile browser:\r\n        let check = false;\r\n        (function (a) {\r\n            if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\r\n        })(navigator.userAgent || navigator.vendor);\r\n        return check;\r\n    }\r\n\r\n}","import {preferences} from \"../preferences\";\r\n\r\nexport class utils {\r\n    static log(message: string, type?: string): void {\r\n        message = 'Camera.js: '+ message;\r\n        if (preferences.debug) {\r\n            switch (type) {\r\n                case 'warn':\r\n                    console.warn(message);\r\n                    break;\r\n                case 'log':\r\n                    console.log(message);\r\n                    break;\r\n                case 'debug':\r\n                    console.debug(message);\r\n                    break;\r\n                default:\r\n                    console.log(message);\r\n            }\r\n        }\r\n    }\r\n\r\n    static isHttps(){\r\n        return 'https:' == document.location.protocol;\r\n    }\r\n\r\n    /**\r\n     * http://stackoverflow.com/questions/5717093/check-if-a-javascript-string-is-a-url\r\n     * @param url\r\n     * @returns {boolean}\r\n     */\r\n    static validUrl(url:string) {\r\n        let regexp: RegExp = /(ftp|http|https):\\/\\/(\\w+:?\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@\\-\\/]))?/;\r\n        return regexp.test(url);\r\n    }\r\n}","export class preferences{\r\n    static isHttps:boolean = false;\r\n    static isMobile:boolean = false;\r\n    static debug:boolean = true;\r\n    static browserCameraSupport:boolean = false;\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY2FtZXJhLnRzIiwic3JjL2V2ZW50cy9sb2FkLnRzIiwic3JjL2xpYi9icm93c2VyLnRzIiwic3JjL2xpYi91dGlscy50cyIsInNyYy9wcmVmZXJlbmNlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQSxxQkFBd0M7QUFDeEMsNEJBQTBDO0FBQzFDLHNCQUFrQztBQUNsQyx3QkFBc0M7QUFFdEM7QUFDSTtBQUNJLEFBQWlCLDBCQUFDLEFBQUssQUFBRSxBQUFDLEFBQzlCO0FBQUM7QUFFWSxzQkFBSyxRQUFsQjs7Z0JBQ1EsQUFBa0I7Ozs7NkNBQUcsSUFBSSxPQUFTLEFBQUU7QUFDeEMsQUFBaUc7QUFFakcsNkNBQU0sQUFBa0IsbUJBQUMsQUFBYSxBQUFFOztBQUZ4QyxBQUFpRztBQUVqRywyQkFBd0MsQUFBQztBQUV6QyxBQUFFLEFBQUMsNEJBQUMsQ0FBQyxVQUFPLFFBQUMsQUFBbUIsQUFBRSxBQUFDLHVCQUFDLEFBQUM7QUFDakMsb0NBQUssTUFBQyxBQUFHLElBQUMsQUFBc0Msd0NBQUUsQUFBTSxBQUFDLEFBQUMsQUFDOUQ7QUFBQztBQUVELEFBQUUsQUFBQyw0QkFBQyxDQUFDLGNBQVcsWUFBQyxBQUFPLEFBQUMsU0FBQyxBQUFDO0FBQ3ZCLG9DQUFLLE1BQUMsQUFBRyxJQUFDLEFBQWdCLGtCQUFFLEFBQU0sQUFBQyxBQUFDLEFBQ3hDO0FBQUM7Ozs7O0FBQ0o7QUFDTCxXQUFBLEFBQUM7QUFuQkQsQUFtQkM7QUFFRCxJQUFJLEFBQWlCLEFBQUUsQUFBQzs7Ozs7QUN6QnhCLHNCQUFtQztBQUNuQyx3QkFBdUM7QUFDdkMsNEJBQTJDO0FBRTNDO0FBQUEseUJBd0JBLENBQUM7QUF0Qkcsd0JBQWEsZ0JB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QU0sT0FBQyxBQUFJLEtBQUMsQUFBRyxBQUFDLEFBQUMsQUFDNUI7QUFBQztBQUNMLFdBQUEsQUFBQztBQWpDRCxBQWlDQztBQWpDWSxnQkFBSzs7Ozs7QUNGbEI7QUFBQSwyQkFLQSxDQUFDO0FBQUQsV0FBQSxBQUFDO0FBTEQsQUFLQztBQUpVLFlBQU8sVUFBVyxBQUFLLEFBQUM7QUFDeEIsWUFBUSxXQUFXLEFBQUssQUFBQztBQUN6QixZQUFLLFFBQVcsQUFBSSxBQUFDO0FBQ3JCLFlBQW9CLHVCQUFXLEFBQUssQUFBQztBQUpuQyxzQkFBVyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQge2xvYWRFdmVudH0gZnJvbSBcIi4vZXZlbnRzL2xvYWRcIjtcclxuaW1wb3J0IHtwcmVmZXJlbmNlc30gZnJvbSBcIi4vcHJlZmVyZW5jZXNcIjtcclxuaW1wb3J0IHt1dGlsc30gZnJvbSBcIi4vbGliL3V0aWxzXCI7XHJcbmltcG9ydCB7YnJvd3Nlcn0gZnJvbSBcIi4vbGliL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHt1cGxvYWR9IGZyb20gXCIuL2xpYi91cGxvYWRcIjtcclxuY2xhc3MgY2FtZXJhSW5pdGlhbGl6ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgY2FtZXJhSW5pdGlhbGl6ZXIucmVhZHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgcmVhZHkoKSB7XHJcbiAgICAgICAgbGV0IGxvYWRFdmVudEluc3RhbmNldyA9IG5ldyBsb2FkRXZlbnQoKTtcclxuICAgICAgICAvL2h0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC93aWtpL1doYXQncy1uZXctaW4tVHlwZVNjcmlwdCNkb3dubGV2ZWwtYXN5bmMtZnVuY3Rpb25zXHJcblxyXG4gICAgICAgIGF3YWl0IGxvYWRFdmVudEluc3RhbmNldy5ldmVudExpc3RlbmVyKCk7XHJcblxyXG4gICAgICAgIGlmICghYnJvd3Nlci5jaGVja0Jyb3dzZXJTdXBwb3J0KCkpIHtcclxuICAgICAgICAgICAgdXRpbHMubG9nKFwiWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgY2FtZXJhXCIsIFwid2FyblwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcHJlZmVyZW5jZXMuaXNIdHRwcykge1xyXG4gICAgICAgICAgICB1dGlscy5sb2coXCJIVFRQUyByZXF1aXJlZFwiLCBcIndhcm5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5uZXcgY2FtZXJhSW5pdGlhbGl6ZXIoKTtcclxuIiwiaW1wb3J0IHtldmVudEludGVyZmFjZX0gZnJvbSBcIi4vaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7dXRpbHN9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHticm93c2VyfSBmcm9tIFwiLi4vbGliL2Jyb3dzZXJcIjtcclxuaW1wb3J0IHtwcmVmZXJlbmNlc30gZnJvbSBcIi4uL3ByZWZlcmVuY2VzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgbG9hZEV2ZW50IGltcGxlbWVudHMgZXZlbnRJbnRlcmZhY2Uge1xyXG5cclxuICAgIGV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgaW5zaWRlIHRoZSB0aGlzLmV2ZW50Q2FsbGJhY2sgbWV0aG9kIHVzaW5nIGEgYXN5bmMgZnVuY3Rpb24gd2hpY2ggbWVhbnNcclxuICAgICAgICAgKiAgIHRoZSBtZXRob2QgKHRoaXMuZXZlbnRDYWxsYmFjaykgd2lsbCB3YWl0IGZvciB0aGUgYW5zd2VyIGZyb20gZXZlbkxpc3RlbmVyIChjdXJyZW50IG1ldGhvZCkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiByZXNvbHZlKCkgd2lsbCByZXR1cm4gdG8gcmVzdWx0IHRvIHRoZSBhc3luYyBmdW5jdGlvbiBpbiBpdHMgY2FsbCBzdGFjaywgYW5kIHdpbGwgbGV0IHRoZSBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgICogICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50Q2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRDYWxsYmFjaygpIHtcclxuICAgICAgICBwcmVmZXJlbmNlcy5pc0h0dHBzID0gdXRpbHMuaXNIdHRwcygpO1xyXG4gICAgICAgIHByZWZlcmVuY2VzLmlzTW9iaWxlID0gYnJvd3Nlci5jaGVja01vYmlsZSgpOyAvL0lmIHRydWUsIG1lYW5zIHRoZSB1c2VyIGJyb3dzZXIgaXMgYSBtb2JpbGUgYnJvd3NlclxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHtwcmVmZXJlbmNlc30gZnJvbSBcIi4uL3ByZWZlcmVuY2VzXCI7XHJcbmV4cG9ydCBjbGFzcyBicm93c2VyIHtcclxuICAgIHN0YXRpYyBjaGVja0Jyb3dzZXJTdXBwb3J0KCk6Ym9vbGVhbiB7XHJcbiAgICAgICAgLy9UaGlzIG1ldGhvZCB3aWxsIGNoZWNrIGlmIHRoZSB1c2VyIGJyb3dzZXIgaXMgc3VwcG9ydGluZyBIVE1MNSBjYW1lcmEgQVBJIG9yIG5vdFxyXG4gICAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhIHx8XHJcbiAgICAgICAgICAgIG5hdmlnYXRvci5oYXNPd25Qcm9wZXJ0eShcIndlYmtpdEdldFVzZXJNZWRpYVwiKSB8fFxyXG4gICAgICAgICAgICBuYXZpZ2F0b3IuaGFzT3duUHJvcGVydHkoXCJtb3pHZXRVc2VyTWVkaWFcIikpIHtcclxuICAgICAgICAgICAgcHJlZmVyZW5jZXMuYnJvd3NlckNhbWVyYVN1cHBvcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjaGVja01vYmlsZSAoKTpib29sZWFue1xyXG4gICAgICAgIC8vUmV0dXJuIHRydWUgaWYgdGhlIHVzZXIgYnJvd3NlciBpcyBhIG1vYmlsZSBicm93c2VyOlxyXG4gICAgICAgIGxldCBjaGVjayA9IGZhbHNlO1xyXG4gICAgICAgIChmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLCA0KSkpIGNoZWNrID0gdHJ1ZTtcclxuICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IpO1xyXG4gICAgICAgIHJldHVybiBjaGVjaztcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQge3ByZWZlcmVuY2VzfSBmcm9tIFwiLi4vcHJlZmVyZW5jZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyB1dGlscyB7XHJcbiAgICBzdGF0aWMgbG9nKG1lc3NhZ2U6IHN0cmluZywgdHlwZT86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIG1lc3NhZ2UgPSAnQ2FtZXJhLmpzOiAnKyBtZXNzYWdlO1xyXG4gICAgICAgIGlmIChwcmVmZXJlbmNlcy5kZWJ1Zykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3dhcm4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xvZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdkZWJ1Zyc6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGlzSHR0cHMoKXtcclxuICAgICAgICByZXR1cm4gJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU3MTcwOTMvY2hlY2staWYtYS1qYXZhc2NyaXB0LXN0cmluZy1pcy1hLXVybFxyXG4gICAgICogQHBhcmFtIHVybFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB2YWxpZFVybCh1cmw6c3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHJlZ2V4cDogUmVnRXhwID0gLyhmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6P1xcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUBcXC1cXC9dKSk/LztcclxuICAgICAgICByZXR1cm4gcmVnZXhwLnRlc3QodXJsKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBwcmVmZXJlbmNlc3tcclxuICAgIHN0YXRpYyBpc0h0dHBzOmJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHN0YXRpYyBpc01vYmlsZTpib29sZWFuID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbiA9IHRydWU7XHJcbiAgICBzdGF0aWMgYnJvd3NlckNhbWVyYVN1cHBvcnQ6Ym9vbGVhbiA9IGZhbHNlO1xyXG59XHJcbiJdfQ=="}